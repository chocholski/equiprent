<div class="grid">
  <div class="col-12">
    <div class="card">
      <p-table #dataTable [value]="users" [columns]="cols" dataKey="Id" sortField="Login" [lazy]="true"
        (onLazyLoad)="loadUsersLazy($event)" [rows]="10" [rowsPerPageOptions]="[10, 25, 50]"
        [totalRecords]="totalRecords" [rowHover]="true" styleClass="p-datatable-gridlines" [paginator]="true"
        responsiveLayout="scroll">
        <ng-template pTemplate="caption">
          <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
            <button pButton [label]="translate.instant('General.Clear')" class="p-button-outlined mb-2"
              icon="pi pi-filter-slash" (click)="filterService.onClearFilters(dataTable)"></button>
            <div class="grid formgrid">
              <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                <span class="p-input-icon-right">
                  <i *ngIf="!filterService.shouldHideIcon(filter.value)" class="pi pi-search"></i>
                  <input type="text" pInputText #filter id="filter"
                    (input)="filterService.onFilterGlobal(dataTable, filter.value)"
                    [placeholder]="translate.instant('General.SearchKeyword')" />
                </span>
              </div>
            </div>
          </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th *ngFor="let col of columns" style="min-width: 12rem" [ngSwitch]="col.field">
              <div class="flex justify-content-between align-items-center">
                {{ col.header | translate }}
                <p-columnFilter *ngSwitchCase="'Login'" pInputText type="text"
                  [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                  field="Login">
                </p-columnFilter>
                <p-columnFilter *ngSwitchCase="'FirstName'" pInputText type="text"
                  [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                  field="FirstName">
                </p-columnFilter>
                <p-columnFilter *ngSwitchCase="'LastName'" pInputText type="text"
                  [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                  field="LastName">
                </p-columnFilter>
                <p-columnFilter *ngSwitchCase="'UserRoleName'"
                  [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                  field="UserRoleName" matchMode="in" [showMatchModes]="false" [showOperator]="false"
                  [showAddButton]="false">
                  <ng-template pTemplate="header">
                    <div>
                      <span class="font-bold">{{translate.instant('User.UserRolePicker')}}</span>
                    </div>
                  </ng-template>
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                    <p-multiSelect [ngModel]="value" [options]="userRoleOptions"
                      [placeholder]="filterService.getPlaceholder(translate.instant(col.header))"
                      (onChange)="filter($event.value)" optionLabel="label">
                      <ng-template let-option pTemplate="item">
                        <div class="p-multiselect-representative-option">
                          <span class="ml-1">{{option.label}}</span>
                        </div>
                      </ng-template>
                    </p-multiSelect>
                  </ng-template>
                </p-columnFilter>
                <p-columnFilter *ngSwitchCase="'IsActive'" type="boolean" display="menu" field="IsActive">
                </p-columnFilter>
              </div>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user let-columns="columns">
          <tr>
            <td>
              {{user.Login}}
            </td>
            <td>
              {{user.FirstName}}
            </td>
            <td>
              {{user.LastName}}
            </td>
            <td>
              {{user.UserRoleName}}
            </td>
            <td>
              <input type="checkbox" [checked]="user.IsActive" disabled />
            </td>
            <td>
              <!-- [TODO] Actions -->
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>