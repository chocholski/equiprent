<div class="grid">
  <div class="col-12">
    <div class="card">
      <div class="col-12">
        <div class="flex flex-column md:flex-row">
          <button *ngIf="hasAccessToButtons" pButton [label]="translate.instant('General.Create')"
            class="p-button-outlined ml-auto" icon="pi pi-plus" (click)="onCreate()"></button>
        </div>
      </div>
      <div class="col-12">
        <p-table #dataTable [value]="rentals" [columns]="cols" dataKey="Id" sortField="Number" [lazy]="true"
          (onLazyLoad)="loadRentalsLazy($event)" [rows]="10" [rowsPerPageOptions]="[10, 25, 50]"
          [totalRecords]="totalRecords" [rowHover]="true" styleClass="p-datatable-gridlines" [paginator]="true"
          responsiveLayout="scroll">
          <ng-template pTemplate="caption">
            <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
              <button pButton [label]="translate.instant('General.Clear')" class="p-button-outlined mb-2"
                icon="pi pi-filter-slash" (click)="filterService.onClearFilters(dataTable)"></button>
              <div class="grid formgrid">
                <div class="col-12 mb-2 lg:col-4 lg:mb-0 mt-2">
                  <span class="p-input-icon-right">
                    <i *ngIf="filter.value && !filterService.shouldHideIcon(filter.value)" class="pi pi-search"></i>
                    <input type="text" pInputText #filter id="filter"
                      (input)="filterService.onFilterGlobal(dataTable, filter.value)"
                      [placeholder]="translate.instant('General.SearchKeyword')" />
                  </span>
                </div>
              </div>
            </div>
          </ng-template>
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th *ngFor="let col of columns" style="min-width: 12rem" [ngSwitch]="col.field">
                <div class="flex justify-content-between align-items-center">
                  {{ col.header | translate }}
                  <p-columnFilter *ngSwitchCase="'Number'" pInputText type="text"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="Number">
                  </p-columnFilter>
                  <p-columnFilter *ngSwitchCase="'CategoryName'"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="CategoryName" matchMode="in" [showMatchModes]="false" [showOperator]="false"
                    [showAddButton]="false">
                    <ng-template pTemplate="header">
                      <div>
                        <span class="font-bold">{{translate.instant('Rental.CategoryPicker')}}</span>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-multiSelect [ngModel]="value" [options]="rentalCategoryOptions"
                        [placeholder]="filterService.getPlaceholder(translate.instant(col.header))"
                        (onChange)="filter($event.value)" optionLabel="label">
                        <ng-template let-option pTemplate="item">
                          <div class="p-multiselect-representative-option">
                            <span class="ml-1">{{option.label}}</span>
                          </div>
                        </ng-template>
                      </p-multiSelect>
                    </ng-template>
                  </p-columnFilter>
                  <p-columnFilter *ngSwitchCase="'RenterName'"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="RenterName" matchMode="in" [showMatchModes]="false" [showOperator]="false"
                    [showAddButton]="false">
                    <ng-template pTemplate="header">
                      <div>
                        <span class="font-bold">{{translate.instant('Rental.RenterPicker')}}</span>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-multiSelect [ngModel]="value" [options]="renterOptions"
                        [placeholder]="filterService.getPlaceholder(translate.instant(col.header))"
                        (onChange)="filter($event.value)" optionLabel="label">
                        <ng-template let-option pTemplate="item">
                          <div class="p-multiselect-representative-option">
                            <span class="ml-1">{{option.label}}</span>
                          </div>
                        </ng-template>
                      </p-multiSelect>
                    </ng-template>
                  </p-columnFilter>
                  <p-columnFilter *ngSwitchCase="'RentierName'"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="RentierName" matchMode="in" [showMatchModes]="false" [showOperator]="false"
                    [showAddButton]="false">
                    <ng-template pTemplate="header">
                      <div>
                        <span class="font-bold">{{translate.instant('Rental.RentierPicker')}}</span>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-multiSelect [ngModel]="value" [options]="rentierOptions"
                        [placeholder]="filterService.getPlaceholder(translate.instant(col.header))"
                        (onChange)="filter($event.value)" optionLabel="label">
                        <ng-template let-option pTemplate="item">
                          <div class="p-multiselect-representative-option">
                            <span class="ml-1">{{option.label}}</span>
                          </div>
                        </ng-template>
                      </p-multiSelect>
                    </ng-template>
                  </p-columnFilter>
                  <p-columnFilter *ngSwitchCase="'UserResponsibleForHandlingName'"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="UserResponsibleForHandlingName" matchMode="in" [showMatchModes]="false"
                    [showOperator]="false" [showAddButton]="false">
                    <ng-template pTemplate="header">
                      <div>
                        <span class="font-bold">{{translate.instant('Rental.UserResponsibleForHandlingPicker')}}</span>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-multiSelect [ngModel]="value" [options]="userResponsibleForHandlingOptions"
                        [placeholder]="filterService.getPlaceholder(translate.instant(col.header))"
                        (onChange)="filter($event.value)" optionLabel="label">
                        <ng-template let-option pTemplate="item">
                          <div class="p-multiselect-representative-option">
                            <span class="ml-1">{{option.label}}</span>
                          </div>
                        </ng-template>
                      </p-multiSelect>
                    </ng-template>
                  </p-columnFilter>
                  <p-columnFilter *ngSwitchCase="'Start'" pInputText type="date"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="Start">
                  </p-columnFilter>
                  <p-columnFilter *ngSwitchCase="'End'" pInputText type="date"
                    [placeholder]="filterService.getPlaceholder(translate.instant(col.header))" display="menu"
                    field="End">
                  </p-columnFilter>
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rental let-columns="columns">
            <tr>
              <td>
                {{rental.Number}}
              </td>
              <td>
                {{rental.CategoryName}}
              </td>
              <td>
                {{rental.RenterName}}
              </td>
              <td>
                {{rental.RentierName}}
              </td>
              <td>
                {{rental.UserResponsibleForHandlingName}}
              </td>
              <td>
                {{rental.Start | date:'yyyy-MM-dd' }}
              </td>
              <td>
                {{rental.End | date:'yyyy-MM-dd' }}
              </td>
              <td class="items-centered gap-2">
                <button *ngIf="hasAccessToButtons" pButton pRipple class="p-button-raised" type="button"
                  [class]="hasAccessToButtons ? 'p-button-raised' : 'p-button-raised p-button-warning'"
                  icon="pi pi-pencil" [label]="translate.instant(onEditLabelId)" (click)="onEdit(rental)"></button>
                <button *ngIf="hasAccessToButtons" pButton pRipple type="button" icon="pi pi-trash"
                  [label]="translate.instant(onDeleteLabelId)" class="p-button-raised p-button-danger"
                  (click)="onDelete(rental)"></button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
    <deletion-dialog [deletionKey]="deletionKey"></deletion-dialog>
  </div>
</div>
<router-outlet></router-outlet>